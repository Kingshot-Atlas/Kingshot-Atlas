import React, { useState, useEffect, useRef } from 'react';
import { colors } from '../utils/styles';

// â”€â”€â”€ Emoji Picker â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

type EmojiEntry = [string, string]; // [emoji, searchable keywords]
const EMOJI_CATEGORIES: { label: string; emojis: EmojiEntry[] }[] = [
  { label: 'Smileys', emojis: [
    ['ðŸ˜€','grinning face happy smile'],['ðŸ˜ƒ','smiley face happy'],['ðŸ˜„','smile grin happy'],['ðŸ˜','beaming grin teeth'],['ðŸ˜†','laughing xd'],['ðŸ˜…','sweat smile nervous'],['ðŸ¤£','rofl rolling laughing'],['ðŸ˜‚','joy crying laughing tears'],['ðŸ™‚','slightly smiling'],['ðŸ™ƒ','upside down'],['ðŸ˜Š','blush happy shy'],['ðŸ˜‡','angel halo innocent'],['ðŸ¥°','love hearts face'],['ðŸ˜','heart eyes love'],['ðŸ¤©','star struck amazed'],['ðŸ˜˜','kiss blowing'],['ðŸ˜—','kissing'],['ðŸ˜š','kissing closed eyes'],['ðŸ˜™','kissing smiling'],['ðŸ¥²','smiling tear'],['ðŸ˜‹','yummy delicious tongue'],['ðŸ˜›','tongue out'],['ðŸ˜œ','wink tongue crazy'],['ðŸ¤ª','zany crazy wild'],['ðŸ˜','squinting tongue'],['ðŸ¤‘','money face rich'],['ðŸ¤—','hugging hug'],['ðŸ¤­','hand over mouth oops'],['ðŸ¤«','shush quiet secret'],['ðŸ¤”','thinking hmm'],['ðŸ«¡','salute'],['ðŸ¤','zipper mouth quiet'],['ðŸ¤¨','raised eyebrow skeptical'],['ðŸ˜','neutral face blank'],['ðŸ˜‘','expressionless'],['ðŸ˜¶','no mouth silent'],['ðŸ«¥','dotted line face'],['ðŸ˜','smirk flirty'],['ðŸ˜’','unamused annoyed'],['ðŸ™„','eye roll whatever'],['ðŸ˜¬','grimace awkward'],['ðŸ˜®â€ðŸ’¨','exhale sigh'],['ðŸ¤¥','lying pinocchio'],['ðŸ˜Œ','relieved content'],['ðŸ˜”','pensive sad'],['ðŸ˜ª','sleepy tired'],['ðŸ¤¤','drooling'],['ðŸ˜´','sleeping zzz'],['ðŸ˜·','mask sick'],['ðŸ¤’','thermometer sick fever'],['ðŸ¤•','bandage hurt injured'],['ðŸ¤¢','nauseated sick green'],['ðŸ¤®','vomiting sick'],['ðŸ¥µ','hot sweating'],['ðŸ¥¶','cold freezing'],['ðŸ¥´','woozy drunk'],['ðŸ˜µ','dizzy'],['ðŸ˜µâ€ðŸ’«','spiral dizzy'],['ðŸ¤¯','exploding head mind blown'],['ðŸ¤ ','cowboy hat yeehaw'],['ðŸ¥³','party celebration birthday'],['ðŸ¥¸','disguise'],['ðŸ˜Ž','cool sunglasses'],['ðŸ¤“','nerd glasses'],['ðŸ§','monocle fancy'],['ðŸ˜•','confused'],['ðŸ«¤','diagonal mouth'],['ðŸ˜Ÿ','worried'],['ðŸ™','slightly frowning'],['â˜¹ï¸','frowning sad'],['ðŸ˜®','open mouth surprised'],['ðŸ˜¯','hushed'],['ðŸ˜²','astonished shocked'],['ðŸ˜³','flushed embarrassed'],['ðŸ¥º','pleading puppy eyes'],['ðŸ¥¹','holding back tears'],['ðŸ˜¦','frowning open mouth'],['ðŸ˜§','anguished'],['ðŸ˜¨','fearful scared'],['ðŸ˜°','anxious sweat'],['ðŸ˜¥','sad relieved'],['ðŸ˜¢','crying tear'],['ðŸ˜­','sobbing crying loud'],['ðŸ˜±','screaming fear'],['ðŸ˜–','confounded'],['ðŸ˜£','persevering'],['ðŸ˜ž','disappointed sad'],['ðŸ˜“','downcast sweat'],['ðŸ˜©','weary tired'],['ðŸ˜«','tired exhausted'],['ðŸ¥±','yawning bored'],['ðŸ˜¤','triumph angry steam'],['ðŸ˜¡','angry mad red'],['ðŸ˜ ','angry'],['ðŸ¤¬','swearing cursing'],['ðŸ˜ˆ','devil smiling purple'],['ðŸ‘¿','imp angry devil'],['ðŸ’€','skull dead death'],['â˜ ï¸','skull crossbones danger'],['ðŸ’©','poop'],['ðŸ¤¡','clown'],['ðŸ‘¹','ogre oni'],['ðŸ‘º','goblin tengu'],['ðŸ‘»','ghost boo'],['ðŸ‘½','alien'],['ðŸ‘¾','space invader game'],['ðŸ¤–','robot bot'],['ðŸ˜º','cat happy smile'],['ðŸ˜¸','cat grin'],['ðŸ˜¹','cat joy tears'],['ðŸ˜»','cat heart eyes'],['ðŸ˜¼','cat smirk'],['ðŸ˜½','cat kiss'],['ðŸ™€','cat weary'],['ðŸ˜¿','cat crying'],['ðŸ˜¾','cat angry'],
  ] },
  { label: 'People', emojis: [
    ['ðŸ‘‹','wave hello hi bye hand'],['ðŸ¤š','raised back hand'],['ðŸ–ï¸','hand fingers splayed'],['âœ‹','raised hand stop high five'],['ðŸ––','vulcan spock'],['ðŸ«±','rightwards hand'],['ðŸ«²','leftwards hand'],['ðŸ«³','palm down hand'],['ðŸ«´','palm up hand'],['ðŸ‘Œ','ok perfect'],['ðŸ¤Œ','pinched fingers italian'],['ðŸ¤','pinching small tiny'],['âœŒï¸','peace victory'],['ðŸ¤ž','crossed fingers luck hope'],['ðŸ«°','hand index thumb crossed'],['ðŸ¤Ÿ','love you gesture'],['ðŸ¤˜','rock on metal horns'],['ðŸ¤™','call me shaka hang loose'],['ðŸ‘ˆ','point left'],['ðŸ‘‰','point right'],['ðŸ‘†','point up'],['ðŸ–•','middle finger'],['ðŸ‘‡','point down'],['â˜ï¸','index pointing up'],['ðŸ«µ','pointing at viewer'],['ðŸ‘','thumbs up like good yes'],['ðŸ‘Ž','thumbs down dislike bad no'],['âœŠ','fist bump raised'],['ðŸ‘Š','fist punch'],['ðŸ¤›','left fist bump'],['ðŸ¤œ','right fist bump'],['ðŸ‘','clap applause'],['ðŸ™Œ','raised hands celebration hooray'],['ðŸ«¶','heart hands love'],['ðŸ‘','open hands'],['ðŸ¤²','palms up together'],['ðŸ¤','handshake deal agreement'],['ðŸ™','pray please thank you namaste'],['âœï¸','writing hand'],['ðŸ’…','nail polish'],['ðŸ¤³','selfie'],['ðŸ’ª','muscle strong flex bicep'],['ðŸ¦¾','mechanical arm prosthetic'],['ðŸ¦¿','mechanical leg prosthetic'],['ðŸ¦µ','leg'],['ðŸ¦¶','foot'],['ðŸ‘‚','ear listen'],['ðŸ¦»','ear hearing aid'],['ðŸ‘ƒ','nose smell'],['ðŸ§ ','brain smart'],['ðŸ«€','anatomical heart'],['ðŸ«','lungs'],['ðŸ¦·','tooth dental'],['ðŸ¦´','bone'],['ðŸ‘€','eyes look see watching'],['ðŸ‘ï¸','eye'],['ðŸ‘…','tongue lick'],['ðŸ‘„','mouth lips'],['ðŸ«¦','biting lip'],['ðŸ‘¶','baby'],['ðŸ§’','child kid'],['ðŸ‘¦','boy'],['ðŸ‘§','girl'],['ðŸ§‘','person adult'],['ðŸ‘±','blond person'],['ðŸ‘¨','man'],['ðŸ‘©','woman'],['ðŸ§”','beard'],['ðŸ‘´','old man grandpa'],['ðŸ‘µ','old woman grandma'],['ðŸ™','frowning person'],['ðŸ™Ž','pouting person'],['ðŸ™…','no gesture'],['ðŸ™†','ok gesture'],['ðŸ’','tipping hand sassy'],['ðŸ™‹','raising hand'],['ðŸ§','deaf person'],['ðŸ™‡','bowing'],['ðŸ¤¦','facepalm'],['ðŸ¤·','shrug idk'],['ðŸ‘®','police officer cop'],['ðŸ•µï¸','detective spy'],['ðŸ’‚','guard'],['ðŸ¥·','ninja'],['ðŸ‘·','construction worker'],['ðŸ«…','person crown'],['ðŸ¤´','prince'],['ðŸ‘¸','princess'],['ðŸ‘³','turban'],['ðŸ‘²','cap'],['ðŸ§•','headscarf hijab'],['ðŸ¤µ','tuxedo'],['ðŸ‘°','veil bride'],['ðŸ¤°','pregnant'],['ðŸ«ƒ','pregnant man'],['ðŸ¤±','breastfeeding'],['ðŸ‘¼','angel baby'],['ðŸŽ…','santa christmas'],['ðŸ¤¶','mrs claus christmas'],['ðŸ¦¸','superhero'],['ðŸ¦¹','supervillain'],['ðŸ§™','mage wizard'],['ðŸ§š','fairy'],['ðŸ§›','vampire'],['ðŸ§œ','merperson'],['ðŸ§','elf'],['ðŸ§ž','genie'],['ðŸ§Ÿ','zombie'],['ðŸ§Œ','troll'],['ðŸ’†','massage'],['ðŸ’‡','haircut'],['ðŸš¶','walking'],['ðŸ§','standing'],['ðŸ§Ž','kneeling'],['ðŸƒ','running'],['ðŸ’ƒ','dancer dancing woman'],['ðŸ•º','man dancing disco'],['ðŸ‘¯','bunny ears'],['ðŸ§–','sauna steam'],['ðŸ§—','climbing'],
  ] },
  { label: 'Animals', emojis: [
    ['ðŸ¶','dog puppy'],['ðŸ±','cat kitty meow'],['ðŸ­','mouse'],['ðŸ¹','hamster'],['ðŸ°','rabbit bunny'],['ðŸ¦Š','fox'],['ðŸ»','bear'],['ðŸ¼','panda'],['ðŸ»â€â„ï¸','polar bear'],['ðŸ¨','koala'],['ðŸ¯','tiger'],['ðŸ¦','lion king'],['ðŸ®','cow'],['ðŸ·','pig'],['ðŸ½','pig nose'],['ðŸ¸','frog'],['ðŸµ','monkey'],['ðŸ™ˆ','see no evil monkey'],['ðŸ™‰','hear no evil monkey'],['ðŸ™Š','speak no evil monkey'],['ðŸ’','monkey'],['ðŸ”','chicken'],['ðŸ§','penguin'],['ðŸ¦','bird'],['ðŸ¤','baby chick'],['ðŸ£','hatching chick'],['ðŸ¥','front facing chick'],['ðŸ¦†','duck'],['ðŸ¦…','eagle'],['ðŸ¦‰','owl'],['ðŸ¦‡','bat'],['ðŸº','wolf'],['ðŸ—','boar'],['ðŸ´','horse'],['ðŸ¦„','unicorn magical'],['ðŸ','bee honeybee'],['ðŸª±','worm'],['ðŸ›','bug caterpillar'],['ðŸ¦‹','butterfly'],['ðŸŒ','snail'],['ðŸž','ladybug'],['ðŸœ','ant'],['ðŸ¦Ÿ','mosquito'],['ðŸ¦—','cricket'],['ðŸª³','cockroach'],['ðŸ•·ï¸','spider'],['ðŸ•¸ï¸','spider web'],['ðŸ¦‚','scorpion'],['ðŸ¢','turtle tortoise'],['ðŸ','snake'],['ðŸ¦Ž','lizard'],['ðŸ¦–','trex dinosaur'],['ðŸ¦•','dinosaur sauropod'],['ðŸ™','octopus'],['ðŸ¦‘','squid'],['ðŸ¦','shrimp'],['ðŸ¦ž','lobster'],['ðŸ¦€','crab'],['ðŸ¡','blowfish puffer'],['ðŸ ','tropical fish'],['ðŸŸ','fish'],['ðŸ¬','dolphin'],['ðŸ³','whale spouting'],['ðŸ‹','whale'],['ðŸ¦ˆ','shark'],['ðŸª¸','coral'],['ðŸŠ','crocodile'],['ðŸ…','tiger'],['ðŸ†','leopard'],['ðŸ¦“','zebra'],['ðŸ¦','gorilla'],['ðŸ¦§','orangutan'],['ðŸ˜','elephant'],['ðŸ¦›','hippo'],['ðŸ¦','rhino'],['ðŸª','camel'],['ðŸ«','two hump camel'],['ðŸ¦’','giraffe'],['ðŸ¦˜','kangaroo'],['ðŸ¦¬','bison'],['ðŸƒ','water buffalo'],['ðŸ‚','ox'],['ðŸ„','cow'],['ðŸŽ','horse racing'],['ðŸ–','pig'],['ðŸ','ram sheep'],['ðŸ‘','ewe sheep'],['ðŸ¦™','llama alpaca'],['ðŸ','goat'],['ðŸ¦Œ','deer'],['ðŸ•','dog'],['ðŸ©','poodle'],['ðŸ¦®','guide dog'],['ðŸ•â€ðŸ¦º','service dog'],['ðŸˆ','cat'],['ðŸˆâ€â¬›','black cat'],['ðŸª¶','feather'],['ðŸ“','rooster'],['ðŸ¦ƒ','turkey'],['ðŸ¦¤','dodo'],['ðŸ¦š','peacock'],['ðŸ¦œ','parrot'],['ðŸ¦¢','swan'],['ðŸ¦©','flamingo'],['ðŸªº','nest eggs'],['ðŸ‡','rabbit'],['ðŸ¦','raccoon'],['ðŸ¦¨','skunk'],['ðŸ¦¡','badger'],['ðŸ¦«','beaver'],['ðŸ¦¦','otter'],['ðŸ¦¥','sloth'],['ðŸ','mouse'],['ðŸ€','rat'],['ðŸ¿ï¸','chipmunk squirrel'],['ðŸ¦”','hedgehog'],
  ] },
  { label: 'Food', emojis: [
    ['ðŸŽ','red apple fruit'],['ðŸ','pear fruit'],['ðŸŠ','orange tangerine fruit'],['ðŸ‹','lemon fruit'],['ðŸŒ','banana fruit'],['ðŸ‰','watermelon fruit'],['ðŸ‡','grapes fruit'],['ðŸ“','strawberry fruit'],['ðŸ«','blueberries fruit'],['ðŸˆ','melon fruit'],['ðŸ’','cherries fruit'],['ðŸ‘','peach fruit'],['ðŸ¥­','mango fruit'],['ðŸ','pineapple fruit'],['ðŸ¥¥','coconut'],['ðŸ¥','kiwi fruit'],['ðŸ…','tomato'],['ðŸ†','eggplant aubergine'],['ðŸ¥‘','avocado'],['ðŸ¥¦','broccoli'],['ðŸ¥¬','leafy green'],['ðŸ¥’','cucumber'],['ðŸŒ¶ï¸','hot pepper chili'],['ðŸ«‘','bell pepper'],['ðŸŒ½','corn'],['ðŸ¥•','carrot'],['ðŸ«’','olive'],['ðŸ§„','garlic'],['ðŸ§…','onion'],['ðŸ¥”','potato'],['ðŸ ','sweet potato'],['ðŸ«˜','beans'],['ðŸ¥','croissant'],['ðŸ¥–','baguette bread'],['ðŸž','bread'],['ðŸ¥¨','pretzel'],['ðŸ¥¯','bagel'],['ðŸ§€','cheese'],['ðŸ¥š','egg'],['ðŸ³','cooking fried egg'],['ðŸ§ˆ','butter'],['ðŸ¥ž','pancakes'],['ðŸ§‡','waffle'],['ðŸ¥“','bacon'],['ðŸ¥©','meat steak'],['ðŸ—','poultry leg chicken'],['ðŸ–','meat bone'],['ðŸŒ­','hot dog'],['ðŸ”','hamburger burger'],['ðŸŸ','french fries'],['ðŸ•','pizza'],['ðŸ«“','flatbread'],['ðŸ¥ª','sandwich'],['ðŸŒ®','taco'],['ðŸŒ¯','burrito'],['ðŸ«”','tamale'],['ðŸ¥™','pita'],['ðŸ§†','falafel'],['ðŸ¥—','salad'],['ðŸ¥˜','pot of food curry'],['ðŸ«•','fondue'],['ðŸ¥«','canned food'],['ðŸ§‚','salt'],['ðŸ','spaghetti pasta'],['ðŸœ','ramen noodles'],['ðŸ²','pot stew'],['ðŸ›','curry rice'],['ðŸ£','sushi'],['ðŸ±','bento box'],['ðŸ¥Ÿ','dumpling'],['ðŸ¤','shrimp tempura'],['ðŸ™','rice ball onigiri'],['ðŸš','rice'],['ðŸ˜','rice cracker'],['ðŸ¥','fish cake'],['ðŸ¥ ','fortune cookie'],['ðŸ¥¡','takeout box'],['ðŸ¦ª','oyster'],['ðŸ¦','ice cream soft serve'],['ðŸ§','shaved ice'],['ðŸ¨','ice cream'],['ðŸ©','donut doughnut'],['ðŸª','cookie'],['ðŸŽ‚','birthday cake'],['ðŸ°','shortcake'],['ðŸ§','cupcake'],['ðŸ¥§','pie'],['ðŸ«','chocolate bar'],['ðŸ¬','candy'],['ðŸ­','lollipop'],['ðŸ®','custard pudding'],['ðŸ¯','honey pot'],['ðŸ¼','baby bottle'],['ðŸ¥›','milk glass'],['â˜•','coffee hot'],['ðŸ«–','teapot'],['ðŸµ','tea'],['ðŸ¶','sake'],['ðŸ¾','champagne bottle'],['ðŸ·','wine glass'],['ðŸ¸','cocktail martini'],['ðŸ¹','tropical drink'],['ðŸº','beer mug'],['ðŸ»','cheers beers clinking'],['ðŸ¥‚','clinking glasses'],['ðŸ¥ƒ','whiskey tumbler'],['ðŸ«—','pouring liquid'],['ðŸ¥¤','cup straw'],['ðŸ§‹','bubble tea boba'],['ðŸ§ƒ','juice box'],['ðŸ§‰','mate'],['ðŸ«™','jar'],
  ] },
  { label: 'Activities', emojis: [
    ['âš½','soccer football'],['ðŸ€','basketball'],['ðŸˆ','football american'],['âš¾','baseball'],['ðŸ¥Ž','softball'],['ðŸŽ¾','tennis'],['ðŸ','volleyball'],['ðŸ‰','rugby'],['ðŸ¥','frisbee disc'],['ðŸŽ±','pool billiards 8ball'],['ðŸª€','yoyo'],['ðŸ“','ping pong table tennis'],['ðŸ¸','badminton'],['ðŸ’','ice hockey'],['ðŸ¥…','goal net'],['â›³','golf'],['ðŸ¹','archery bow arrow'],['ðŸŽ£','fishing'],['ðŸ¤¿','diving mask'],['ðŸ¥Š','boxing glove'],['ðŸ¥‹','martial arts'],['ðŸŽ½','running shirt'],['ðŸ›¹','skateboard'],['ðŸ›¼','roller skate'],['ðŸ›·','sled'],['â›¸ï¸','ice skating'],['ðŸ¥Œ','curling stone'],['ðŸŽ¿','ski skiing'],['â›·ï¸','skier skiing'],['ðŸ‚','snowboarder'],['ðŸª‚','parachute'],['ðŸ‹ï¸','weight lifting'],['ðŸ¤¼','wrestling'],['ðŸ¤¸','cartwheel gymnast'],['ðŸ¤½','water polo'],['ðŸš´','cycling bike'],['ðŸšµ','mountain biking'],['ðŸ¤¾','handball'],['ðŸŒï¸','golf'],['ðŸ‡','horse racing'],['ðŸ§˜','yoga meditation'],['ðŸ„','surfing'],['ðŸŠ','swimming'],['ðŸ¤½','water polo'],['ðŸ§—','climbing'],['ðŸ¤º','fencing sword'],['ðŸŽ®','video game controller gaming'],['ðŸ•¹ï¸','joystick arcade'],['ðŸŽ²','dice game'],['â™Ÿï¸','chess pawn'],['ðŸŽ¯','bullseye target dart'],['ðŸŽ³','bowling'],['ðŸª„','magic wand'],['ðŸŽª','circus tent'],['ðŸŽ¨','art palette painting'],['ðŸŽ­','theater drama masks'],['ðŸŽ¼','music score'],['ðŸŽµ','music note'],['ðŸŽ¶','music notes'],['ðŸŽ¤','microphone karaoke'],['ðŸŽ§','headphones music'],['ðŸŽ·','saxophone jazz'],['ðŸª—','accordion'],['ðŸŽ¸','guitar rock'],['ðŸŽ¹','piano keyboard'],['ðŸŽº','trumpet'],['ðŸŽ»','violin'],['ðŸª•','banjo'],['ðŸ¥','drum'],['ðŸª˜','long drum'],['ðŸ†','trophy winner champion'],['ðŸ¥‡','gold medal first'],['ðŸ¥ˆ','silver medal second'],['ðŸ¥‰','bronze medal third'],['ðŸ…','sports medal'],['ðŸŽ–ï¸','military medal'],['ðŸŽ—ï¸','reminder ribbon'],['ðŸŽŸï¸','admission ticket'],['ðŸŽ«','ticket'],['ðŸŽª','circus tent'],
  ] },
  { label: 'Travel & Nature', emojis: [
    ['ðŸš—','car automobile'],['ðŸš•','taxi cab'],['ðŸš™','suv'],['ðŸšŒ','bus'],['ðŸšŽ','trolleybus'],['ðŸŽï¸','race car'],['ðŸš“','police car'],['ðŸš‘','ambulance'],['ðŸš’','fire engine truck'],['ðŸš','minibus van'],['ðŸ›»','pickup truck'],['ðŸšš','delivery truck'],['ðŸš›','semi truck'],['ðŸšœ','tractor farm'],['ðŸï¸','motorcycle'],['ðŸ›µ','scooter'],['ðŸš²','bicycle bike'],['ðŸ›´','kick scooter'],['ðŸ›º','auto rickshaw'],['ðŸš€','rocket launch space'],['ðŸ›¸','ufo alien flying saucer'],['ðŸ›©ï¸','small airplane'],['âœˆï¸','airplane plane flight'],['ðŸš','helicopter'],['ðŸ›¶','canoe'],['â›µ','sailboat'],['ðŸš¤','speedboat'],['ðŸ›¥ï¸','motor boat'],['ðŸ›³ï¸','passenger ship cruise'],['â›´ï¸','ferry'],['ðŸš¢','ship'],['âš“','anchor'],['ðŸ—¼','tokyo tower'],['ðŸ°','castle european'],['ðŸ¯','castle japanese'],['ðŸŸï¸','stadium'],['ðŸŽ¡','ferris wheel'],['ðŸŽ¢','roller coaster'],['ðŸŽ ','carousel'],['â›²','fountain'],['ðŸŒ‹','volcano'],['ðŸ”ï¸','snow mountain'],['ðŸ—»','mount fuji'],['ðŸ•ï¸','camping tent'],['ðŸ–ï¸','beach umbrella'],['ðŸœï¸','desert'],['ðŸŒ…','sunrise'],['ðŸŒ„','sunrise mountains'],['ðŸŒ†','cityscape dusk'],['ðŸŒ‡','sunset city'],['ðŸŒ‰','bridge night'],['ðŸŒŒ','milky way galaxy stars'],['ðŸ—½','statue liberty'],['ðŸ—¿','moai easter island'],['ðŸŒ','globe earth africa europe'],['ðŸŒŽ','globe earth americas'],['ðŸŒ','globe earth asia'],['ðŸŒ','globe meridians'],['ðŸ§­','compass'],['ðŸ ','house home'],['ðŸ¡','house garden'],['ðŸ¢','office building'],['ðŸ£','post office'],['ðŸ¥','hospital'],['ðŸ¦','bank'],['ðŸ¨','hotel'],['ðŸª','convenience store'],['ðŸ«','school'],['ðŸ¬','department store'],['ðŸ­','factory'],['ðŸ¯','japanese castle'],['â›ª','church'],['ðŸ•Œ','mosque'],['ðŸ•','synagogue'],['â›©ï¸','shrine shinto'],['ðŸŒ³','deciduous tree'],['ðŸŒ²','evergreen tree pine'],['ðŸŒ´','palm tree tropical'],['ðŸŒµ','cactus desert'],['ðŸŒ¿','herb leaf'],['ðŸ€','four leaf clover luck'],['ðŸ','maple leaf canada fall'],['ðŸ‚','fallen leaf autumn'],['ðŸƒ','leaf fluttering wind'],['ðŸª»','hyacinth flower'],['ðŸŒº','hibiscus flower'],['ðŸŒ»','sunflower'],['ðŸŒ¹','rose flower'],['ðŸŒ·','tulip flower'],['ðŸŒ¼','blossom flower'],['ðŸŒ¸','cherry blossom sakura'],['ðŸ’','bouquet flowers'],['ðŸª·','lotus flower'],['ðŸª¹','empty nest'],['ðŸš','seashell shell'],['ðŸª¨','rock stone'],['ðŸªµ','wood log'],['ðŸ„','mushroom'],
  ] },
  { label: 'Objects', emojis: [
    ['âŒš','watch time'],['ðŸ“±','phone mobile'],['ðŸ’»','laptop computer'],['âŒ¨ï¸','keyboard'],['ðŸ–¥ï¸','desktop computer monitor'],['ðŸ–¨ï¸','printer'],['ðŸ–±ï¸','mouse computer'],['ðŸ’½','computer disk'],['ðŸ’¾','floppy disk save'],['ðŸ’¿','cd dvd'],['ðŸ“€','dvd'],['ðŸ“·','camera photo'],['ðŸ“¸','camera flash photo'],['ðŸ“¹','video camera'],['ðŸŽ¥','movie camera film'],['ðŸ“ž','telephone phone'],['ðŸ“º','tv television'],['ðŸ“»','radio'],['ðŸŽ™ï¸','studio microphone podcast'],['ðŸŽšï¸','level slider'],['ðŸŽ›ï¸','control knobs'],['ðŸ§­','compass'],['â±ï¸','stopwatch timer'],['â²ï¸','timer clock'],['â°','alarm clock'],['ðŸ•°ï¸','mantelpiece clock'],['ðŸ”‹','battery'],['ðŸ”Œ','plug electric'],['ðŸ’¡','light bulb idea'],['ðŸ”¦','flashlight torch'],['ðŸ•¯ï¸','candle'],['ðŸ§¯','fire extinguisher'],['ðŸ›¢ï¸','oil drum barrel'],['ðŸ’°','money bag'],['ðŸ’³','credit card'],['ðŸ’Ž','gem diamond jewel'],['âš–ï¸','balance scale justice'],['ðŸ§°','toolbox'],['ðŸ”§','wrench tool'],['ðŸ”¨','hammer tool'],['âš’ï¸','hammer pick'],['ðŸ› ï¸','hammer wrench tools'],['â›ï¸','pick'],['ðŸ”©','nut bolt'],['âš™ï¸','gear settings'],['ðŸ§²','magnet'],['ðŸ”«','pistol gun water'],['ðŸ’£','bomb'],['ðŸ§¨','firecracker dynamite'],['ðŸª“','axe'],['ðŸ”ª','knife'],['ðŸ—¡ï¸','dagger sword'],['âš”ï¸','crossed swords battle fight'],['ðŸ›¡ï¸','shield protect defense'],['ðŸ”‘','key'],['ðŸ—ï¸','old key'],['ðŸ”’','locked padlock'],['ðŸ”“','unlocked'],['ðŸ“¦','package box'],['ðŸ“«','mailbox'],['ðŸ“¬','mailbox flag'],['âœ‰ï¸','email envelope letter'],['ðŸ“','memo note writing'],['ðŸ“','folder file'],['ðŸ“‚','open folder'],['ðŸ“‹','clipboard'],['ðŸ“Œ','pushpin pin'],['ðŸ“Ž','paperclip'],['ðŸ–Šï¸','pen'],['âœï¸','pencil'],['ðŸ“','ruler'],['ðŸ“','triangular ruler'],['âœ‚ï¸','scissors cut'],['ðŸ—ƒï¸','card file box'],['ðŸ—„ï¸','file cabinet'],['ðŸ—‘ï¸','trash wastebasket delete'],['ðŸ”','locked key'],['ðŸª™','coin money'],['ðŸ’µ','dollar money'],['ðŸ’´','yen money'],['ðŸ’¶','euro money'],['ðŸ’·','pound money'],['ðŸ“Š','bar chart graph'],['ðŸ“ˆ','chart increasing up'],['ðŸ“‰','chart decreasing down'],
  ] },
  { label: 'Symbols', emojis: [
    ['â¤ï¸','red heart love'],['ðŸ§¡','orange heart'],['ðŸ’›','yellow heart'],['ðŸ’š','green heart'],['ðŸ’™','blue heart'],['ðŸ’œ','purple heart'],['ðŸ–¤','black heart'],['ðŸ¤','white heart'],['ðŸ¤Ž','brown heart'],['ðŸ’”','broken heart'],['â£ï¸','heart exclamation'],['ðŸ’•','two hearts'],['ðŸ’ž','revolving hearts'],['ðŸ’“','beating heart'],['ðŸ’—','growing heart'],['ðŸ’–','sparkling heart'],['ðŸ’˜','heart arrow cupid'],['ðŸ’','heart ribbon gift'],['ðŸ’Ÿ','heart decoration'],['â¤ï¸â€ðŸ”¥','heart fire burning'],['â¤ï¸â€ðŸ©¹','mending heart'],['â­','star'],['ðŸŒŸ','glowing star'],['ðŸ’«','dizzy star'],['âœ¨','sparkles magic'],['âš¡','lightning zap bolt electric'],['ðŸ”¥','fire hot flame lit'],['ðŸ’¥','collision boom explosion'],['â„ï¸','snowflake cold winter'],['ðŸŒˆ','rainbow'],['â˜€ï¸','sun sunny'],['ðŸŒ¤ï¸','sun small cloud'],['â›…','sun cloud'],['ðŸŒ¥ï¸','sun behind cloud'],['â˜ï¸','cloud'],['ðŸŒ§ï¸','cloud rain'],['â›ˆï¸','cloud lightning rain'],['ðŸŒ©ï¸','cloud lightning'],['ðŸ’§','droplet water'],['ðŸ’¦','sweat splash water'],['ðŸŒŠ','wave ocean water'],['âœ…','check mark yes done'],['âŒ','cross mark no wrong'],['âš ï¸','warning caution'],['ðŸ”´','red circle'],['ðŸŸ ','orange circle'],['ðŸŸ¡','yellow circle'],['ðŸŸ¢','green circle'],['ðŸ”µ','blue circle'],['ðŸŸ£','purple circle'],['âš«','black circle'],['âšª','white circle'],['ðŸŸ¤','brown circle'],['ðŸ”¶','large orange diamond'],['ðŸ”·','large blue diamond'],['ðŸ”¸','small orange diamond'],['ðŸ”¹','small blue diamond'],['ðŸ’ ','diamond dot'],['â™ ï¸','spade'],['â™£ï¸','club'],['â™¥ï¸','heart suit'],['â™¦ï¸','diamond suit'],['ðŸ','checkered flag race finish'],['ðŸš©','red flag'],['ðŸŽŒ','crossed flags'],['ðŸ´','black flag'],['ðŸ³ï¸','white flag surrender'],['ðŸ³ï¸â€ðŸŒˆ','rainbow flag pride lgbtq'],['ðŸ´â€â˜ ï¸','pirate flag'],['ðŸ””','bell notification'],['ðŸ”•','bell silent muted'],['ðŸ“¢','loudspeaker megaphone'],['ðŸ“£','megaphone cheering'],['ðŸ’¬','speech bubble chat message'],['ðŸ’­','thought bubble'],['ðŸ—¯ï¸','anger bubble'],['ðŸ”‡','muted speaker'],['ðŸ”ˆ','speaker low'],['ðŸ”‰','speaker medium'],['ðŸ”Š','speaker loud'],['ðŸŽµ','music note'],['ðŸŽ¶','music notes'],['ðŸ’¤','sleeping zzz'],['ðŸ’¢','anger symbol'],['ðŸ’¬','speech bubble chat'],['ðŸ”°','beginner japanese'],['â™»ï¸','recycling recycle'],['âœ³ï¸','eight spoked asterisk'],['â‡ï¸','sparkle'],['ðŸ”±','trident emblem'],['ðŸ“›','name badge'],['ðŸ”°','beginner'],['â­•','circle red'],['âœ…','check yes'],['â˜‘ï¸','ballot check'],['âœ”ï¸','check mark heavy'],['âŽ','cross mark'],['âž•','plus add'],['âž–','minus subtract'],['âž—','divide'],['âœ–ï¸','multiply'],['â™¾ï¸','infinity'],['â€¼ï¸','double exclamation'],['â‰ï¸','exclamation question'],['â“','question mark red'],['â”','question mark white'],['â•','exclamation mark white'],['â—','exclamation mark red'],['ã€°ï¸','wavy dash'],['Â©ï¸','copyright'],['Â®ï¸','registered'],['â„¢ï¸','trademark'],['#ï¸âƒ£','hash number sign'],['*ï¸âƒ£','asterisk keycap'],['0ï¸âƒ£','zero'],['1ï¸âƒ£','one'],['2ï¸âƒ£','two'],['3ï¸âƒ£','three'],['4ï¸âƒ£','four'],['5ï¸âƒ£','five'],['6ï¸âƒ£','six'],['7ï¸âƒ£','seven'],['8ï¸âƒ£','eight'],['9ï¸âƒ£','nine'],['ðŸ”Ÿ','ten keycap'],['ðŸ’¯','hundred perfect score'],['ðŸ” ','input latin uppercase'],['ðŸ”¡','input latin lowercase'],['ðŸ”¢','input numbers'],['ðŸ”£','input symbols'],['ðŸ”¤','input latin letters'],['ðŸ†Ž','ab blood type'],['ðŸ†‘','cl button'],['ðŸ†’','cool button'],['ðŸ†“','free button'],['ðŸ†”','id button'],['ðŸ†•','new button'],['ðŸ†–','ng button'],['ðŸ†—','ok button'],['ðŸ†˜','sos help emergency'],['ðŸ†™','up button'],['ðŸ†š','vs versus'],['ðŸˆ','japanese here'],['ðŸˆ¶','japanese not free charge'],['ðŸˆ¯','japanese reserved'],['ðŸ‰','japanese bargain'],['ðŸˆ¹','japanese discount'],['ðŸˆš','japanese free charge'],['ðŸˆ²','japanese prohibited'],['ðŸ‰‘','japanese acceptable'],['ãŠ—ï¸','japanese congratulations'],['ãŠ™ï¸','japanese secret'],
  ] },
];

// Flatten for search
const ALL_EMOJIS = EMOJI_CATEGORIES.flatMap(c => c.emojis);

const EmojiPicker: React.FC<{ value: string; onChange: (emoji: string) => void }> = ({ value, onChange }) => {
  const [open, setOpen] = useState(false);
  const [search, setSearch] = useState('');
  const ref = useRef<HTMLDivElement>(null);

  useEffect(() => {
    if (!open) return;
    const handler = (e: MouseEvent) => { if (ref.current && !ref.current.contains(e.target as Node)) setOpen(false); };
    document.addEventListener('mousedown', handler);
    return () => document.removeEventListener('mousedown', handler);
  }, [open]);

  const q = search.trim().toLowerCase();
  const filteredCategories = q
    ? [{ label: 'Results', emojis: ALL_EMOJIS.filter(([, keywords]) => keywords.toLowerCase().includes(q)) }]
    : EMOJI_CATEGORIES;

  return (
    <div ref={ref} style={{ position: 'relative', display: 'inline-block' }}>
      <button onClick={() => setOpen(!open)} type="button"
        style={{ width: 44, height: 36, fontSize: value ? '1.1rem' : '0.7rem', backgroundColor: '#1a1a1a', border: `1px solid ${open ? '#a855f7' : '#333'}`, borderRadius: 6, cursor: 'pointer', color: value ? undefined : colors.textMuted, display: 'flex', alignItems: 'center', justifyContent: 'center', transition: 'border-color 0.15s' }}>
        {value || 'ðŸ˜€'}
      </button>
      {open && (
        <div style={{ position: 'absolute', top: '100%', left: 0, zIndex: 100, marginTop: 4, width: 320, maxHeight: 360, backgroundColor: '#1a1a1a', border: '1px solid #333', borderRadius: 10, boxShadow: '0 12px 40px rgba(0,0,0,0.7)', overflow: 'hidden', display: 'flex', flexDirection: 'column' }}>
          <div style={{ padding: '0.4rem 0.5rem', borderBottom: '1px solid #222' }}>
            <input type="text" value={search} onChange={e => setSearch(e.target.value)} placeholder="Search emoji (e.g. smile, heart, fire)..." autoFocus
              style={{ width: '100%', padding: '0.35rem 0.5rem', backgroundColor: '#111', border: '1px solid #333', borderRadius: 6, color: '#fff', fontSize: '0.75rem', outline: 'none', boxSizing: 'border-box' }} />
          </div>
          <div style={{ overflowY: 'auto', padding: '0.3rem', flex: 1 }}>
            {filteredCategories.map(cat => (
              <div key={cat.label}>
                {cat.emojis.length > 0 && (
                  <>
                    <div style={{ color: colors.textMuted, fontSize: '0.6rem', fontWeight: 700, padding: '0.3rem 0.2rem 0.15rem', textTransform: 'uppercase', letterSpacing: '0.03em' }}>{cat.label}</div>
                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(8, 1fr)', gap: 2 }}>
                      {cat.emojis.map(([em]) => (
                        <button key={em} onClick={() => { onChange(em); setOpen(false); setSearch(''); }} type="button"
                          style={{ width: '100%', aspectRatio: '1', fontSize: '1.15rem', backgroundColor: em === value ? '#a855f730' : 'transparent', border: em === value ? '1px solid #a855f7' : '1px solid transparent', borderRadius: 4, cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', transition: 'background-color 0.1s' }}
                          onMouseEnter={e => { if (em !== value) (e.currentTarget.style.backgroundColor = '#ffffff10'); }}
                          onMouseLeave={e => { if (em !== value) (e.currentTarget.style.backgroundColor = 'transparent'); }}>
                          {em}
                        </button>
                      ))}
                    </div>
                  </>
                )}
                {q && cat.emojis.length === 0 && (
                  <div style={{ color: colors.textMuted, fontSize: '0.75rem', textAlign: 'center', padding: '1.5rem 0.5rem' }}>No emojis match &ldquo;{search}&rdquo;</div>
                )}
              </div>
            ))}
          </div>
        </div>
      )}
    </div>
  );
};

export default EmojiPicker;
export { EMOJI_CATEGORIES, ALL_EMOJIS };
export type { EmojiEntry };
