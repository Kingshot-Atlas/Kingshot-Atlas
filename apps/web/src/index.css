@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700;800&family=Orbitron:wght@400;500;600;700;800;900&display=swap');

/* Trajan Pro Font - Self-hosted (add font files to /public/fonts/) */
/* If you have Trajan Pro licensed, place the files and uncomment:
@font-face {
  font-family: 'Trajan Pro';
  src: url('/fonts/TrajanPro-Regular.woff2') format('woff2'),
       url('/fonts/TrajanPro-Regular.woff') format('woff');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'Trajan Pro';
  src: url('/fonts/TrajanPro-Bold.woff2') format('woff2'),
       url('/fonts/TrajanPro-Bold.woff') format('woff');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}
*/

/* Adobe Fonts (Typekit) - Alternative: Add your kit ID */
/* @import url("https://use.typekit.net/YOUR_KIT_ID.css"); */

/* Global dark background - prevents white flash and white edges */
html, body {
  background-color: #0a0a0a;
  min-height: 100vh;
}

#root {
  background-color: #0a0a0a;
  min-height: 100vh;
}

/* Design Tokens */
:root {
  /* Colors - Backgrounds */
  --color-bg: #0a0a0a;
  --color-surface: #111111;
  --color-card: #131318;
  --color-surface-hover: #1a1a1a;
  
  /* Colors - Borders */
  --color-border: #2a2a2a;
  --color-border-subtle: #1f1f1f;
  --color-border-strong: #3a3a3a;
  
  /* Colors - Text */
  --color-text: #ffffff;
  --color-text-secondary: #9ca3af;
  --color-text-muted: #6b7280;
  
  /* Colors - Brand & Accent */
  --color-primary: #22d3ee;
  --color-primary-hover: #06b6d4;
  --color-success: #22c55e;
  --color-warning: #eab308;
  --color-error: #ef4444;
  --color-orange: #f97316;
  --color-purple: #a855f7;
  --color-blue: #3b82f6;
  --color-gold: #fbbf24;
  --color-discord: #5865F2;
  
  /* Spacing Scale (8px base) */
  --space-1: 0.25rem;  /* 4px */
  --space-2: 0.5rem;   /* 8px */
  --space-3: 0.75rem;  /* 12px */
  --space-4: 1rem;     /* 16px */
  --space-5: 1.25rem;  /* 20px */
  --space-6: 1.5rem;   /* 24px */
  --space-8: 2rem;     /* 32px */
  --space-10: 2.5rem;  /* 40px */
  --space-12: 3rem;    /* 48px */
  
  /* Border Radius */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-full: 9999px;
  
  /* Shadows */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.2);
  --shadow-card: 0 4px 20px rgba(0, 0, 0, 0.2);
  --shadow-card-hover: 0 12px 40px rgba(0, 0, 0, 0.4);
  --shadow-tooltip: 0 4px 12px rgba(0, 0, 0, 0.4);
  --shadow-glow: 0 0 20px rgba(34, 211, 238, 0.1);
  
  /* Typography */
  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  --font-display: 'Trajan Pro', 'Cinzel', 'Times New Roman', serif;
  --font-mono: 'Orbitron', monospace;
  
  /* Transitions */
  --transition-fast: 150ms ease;
  --transition-base: 200ms ease;
  --transition-slow: 300ms ease;
  
  /* Breakpoints (for reference in JS) */
  --breakpoint-mobile: 768px;
  --breakpoint-tablet: 1024px;
  --breakpoint-desktop: 1280px;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  background-color: #0a0a0a;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: #0a0a0a;
  color: #f3f4f6;
  line-height: 1.6;
}

::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: #1a1a1a;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(135deg, #00b8e6 0%, #007799 100%);
}

/* Focus Styles for Accessibility */
:focus {
  outline: none;
}

:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
  border-radius: var(--radius-sm);
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Common Animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideIn {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes slideUp {
  from { transform: translateY(8px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* ===========================================
   Tailwind Component Classes
   =========================================== */

@layer components {
  /* Card Styles */
  .card {
    @apply bg-surface rounded-lg border border-border transition-all duration-200;
  }
  
  .card-hover {
    @apply hover:border-primary/50 hover:shadow-card-hover hover:-translate-y-0.5;
  }
  
  /* Button Variants */
  .btn {
    @apply px-4 py-2 rounded-md font-medium transition-all duration-200 cursor-pointer;
  }
  
  .btn-primary {
    @apply bg-primary text-black hover:bg-primary-hover;
  }
  
  .btn-secondary {
    @apply bg-transparent border border-border text-text-secondary hover:border-primary hover:text-primary;
  }
  
  .btn-ghost {
    @apply bg-transparent text-text-secondary hover:bg-surface-hover hover:text-white;
  }
  
  .btn-danger {
    @apply bg-error/20 border border-error text-error hover:bg-error/30;
  }
  
  /* Badge Styles */
  .badge {
    @apply px-2 py-0.5 rounded text-xs font-medium;
  }
  
  .badge-primary {
    @apply bg-primary/15 text-primary border border-primary/30;
  }
  
  .badge-success {
    @apply bg-success/15 text-success border border-success/30;
  }
  
  .badge-warning {
    @apply bg-warning/15 text-warning border border-warning/30;
  }
  
  .badge-error {
    @apply bg-error/15 text-error border border-error/30;
  }
  
  /* Tier Badges */
  .badge-tier-s {
    @apply bg-tier-s/20 text-tier-s border border-tier-s/40 shadow-glow-gold;
  }
  
  .badge-tier-a {
    @apply bg-tier-a/20 text-tier-a border border-tier-a/40;
  }
  
  .badge-tier-b {
    @apply bg-tier-b/20 text-tier-b border border-tier-b/40;
  }
  
  .badge-tier-c {
    @apply bg-tier-c/20 text-tier-c border border-tier-c/40;
  }
  
  .badge-tier-d {
    @apply bg-tier-d/20 text-tier-d border border-tier-d/40;
  }
  
  /* Input Styles */
  .input {
    @apply w-full px-4 py-3 bg-bg border border-border rounded-md text-white text-sm outline-none transition-colors duration-200 focus:border-primary;
  }
  
  .select {
    @apply w-full px-4 py-3 bg-bg border border-border rounded-md text-white text-sm cursor-pointer appearance-none;
  }
  
  /* Tooltip */
  .tooltip {
    @apply absolute z-50 px-3 py-2 bg-bg border border-border rounded-md text-sm text-white shadow-tooltip whitespace-nowrap;
  }
  
  /* Neon Glow Text */
  .text-glow {
    @apply text-primary drop-shadow-[0_0_8px_rgba(34,211,238,0.5)];
  }
  
  .text-glow-gold {
    @apply text-gold drop-shadow-[0_0_8px_rgba(251,191,36,0.5)];
  }
  
  /* Filter Panel */
  .filter-panel {
    @apply p-6 bg-surface/90 backdrop-blur-lg rounded-lg border border-border animate-fade-in;
  }
  
  /* Empty State */
  .empty-state {
    @apply text-center py-16 px-8 bg-surface rounded-lg border border-border;
  }
  
  .empty-state-icon {
    @apply text-5xl mb-4 opacity-50;
  }
  
  .empty-state-title {
    @apply text-white text-xl font-medium mb-2;
  }
  
  .empty-state-description {
    @apply text-text-muted text-sm max-w-md mx-auto mb-6;
  }
}

/* Smooth scrolling */
html {
  scroll-behavior: smooth;
}

@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }
}

/* Tap highlight control for mobile */
* {
  -webkit-tap-highlight-color: rgba(34, 211, 238, 0.1);
}

/* Mobile-First Responsive Utilities */
@media (max-width: 768px) {
  /* Touch targets: only standalone interactive elements, not inline links/badges */
  button:not(.inline-action):not(.chip),
  [role="button"]:not(.inline-action):not(.chip) {
    min-height: 44px;
  }
  
  /* Prevent horizontal overflow */
  body {
    overflow-x: hidden;
    overflow-wrap: break-word;
    word-wrap: break-word;
  }
  
  /* Better table scrolling on mobile */
  .mobile-table-scroll {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Reduce padding on mobile containers */
  .container {
    padding-left: 0.75rem;
    padding-right: 0.75rem;
  }
  
  /* Improve form inputs on mobile */
  input, select, textarea {
    font-size: 16px; /* Prevents iOS zoom on focus */
  }
  
  /* Hide scrollbar on mobile for cleaner look */
  .hide-scrollbar-mobile::-webkit-scrollbar {
    display: none;
  }
  .hide-scrollbar-mobile {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  /* Range input touch-friendly styling */
  input[type="range"] {
    height: 24px;
    cursor: pointer;
  }
  
  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--color-primary);
    border: 2px solid var(--color-bg);
    box-shadow: 0 0 6px rgba(34, 211, 238, 0.3);
    cursor: pointer;
  }
  
  input[type="range"]::-moz-range-thumb {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--color-primary);
    border: 2px solid var(--color-bg);
    box-shadow: 0 0 6px rgba(34, 211, 238, 0.3);
    cursor: pointer;
  }
}

/* Body scroll lock for mobile menu overlay */
body.menu-open {
  overflow: hidden;
  position: fixed;
  width: 100%;
  height: 100%;
}

/* Safe area insets for notched devices */
@supports (padding: max(0px)) {
  .safe-area-inset {
    padding-left: max(0.75rem, env(safe-area-inset-left));
    padding-right: max(0.75rem, env(safe-area-inset-right));
    padding-bottom: max(0.75rem, env(safe-area-inset-bottom));
  }
}

/* High Contrast Mode */
.high-contrast {
  /* Increase contrast for text */
  --color-text: #ffffff;
  --color-text-secondary: #e5e5e5;
  --color-text-muted: #b0b0b0;
  
  /* Stronger borders */
  --color-border: #555555;
  --color-border-subtle: #444444;
  --color-border-strong: #666666;
  
  /* Higher contrast backgrounds */
  --color-bg: #000000;
  --color-surface: #0a0a0a;
  --color-card: #111111;
}

.high-contrast * {
  /* Ensure minimum contrast */
  text-shadow: none !important;
}

.high-contrast a,
.high-contrast button {
  /* Underline links for visibility */
  text-decoration-thickness: 2px;
}

.high-contrast .stat-card,
.high-contrast .phase-card,
.high-contrast .kingdom-card {
  border-width: 2px !important;
}

/* Focus indicators for high contrast */
.high-contrast *:focus {
  outline: 3px solid #ffffff !important;
  outline-offset: 2px !important;
}

.high-contrast svg text {
  /* Ensure SVG text is readable */
  fill: #ffffff !important;
}

.high-contrast svg polygon[fill*="20"] {
  /* Make radar fill more visible */
  fill-opacity: 0.4 !important;
}

/* Print Styles for Kingdom Profiles */
@media print {
  /* Reset backgrounds for printing */
  body, html {
    background-color: #fff !important;
    color: #000 !important;
  }
  
  /* Hide non-essential elements */
  header, nav, footer,
  .no-print,
  button:not(.print-include),
  [role="navigation"],
  .share-menu,
  .ad-banner {
    display: none !important;
  }
  
  /* Adjust card backgrounds for print */
  .stat-card, .phase-card, .kingdom-card {
    background-color: #f5f5f5 !important;
    border: 1px solid #ddd !important;
    color: #000 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }
  
  /* Ensure radar chart prints with colors */
  svg {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }
  
  /* Radar chart specific print styles */
  .radar-chart-container {
    page-break-inside: avoid;
  }
  
  /* Make text readable on print */
  * {
    color: #000 !important;
    text-shadow: none !important;
  }
  
  /* Keep accent colors for important elements */
  .print-color {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }
  
  /* Ensure links are visible */
  a {
    text-decoration: underline !important;
  }
  
  /* Page margins */
  @page {
    margin: 1cm;
  }
  
  /* Avoid page breaks in cards */
  .phase-card, .stat-card {
    page-break-inside: avoid;
  }
}

/* ===========================================
   RTL (Right-to-Left) Language Support
   Applied when <html dir="rtl"> is set (e.g., Arabic)
   =========================================== */

/* Global text alignment flip */
[dir="rtl"] body {
  text-align: right;
}

/* Flex row direction auto-reversal â€” CSS flexbox respects dir="rtl" natively
   for flex containers, so most flex-row layouts reverse automatically.
   However, some inline styles override this, so we add explicit rules. */

/* Mirror directional icons (arrows, chevrons, back buttons) */
[dir="rtl"] .rtl-mirror,
[dir="rtl"] .icon-arrow,
[dir="rtl"] .icon-chevron {
  transform: scaleX(-1);
}

/* Unicode arrows in translated text are already handled in translation JSON.
   SVG arrows used as UI elements need mirroring: */
[dir="rtl"] [data-direction="forward"],
[dir="rtl"] .arrow-right {
  transform: scaleX(-1);
}

/* Navigation & Header adjustments */
[dir="rtl"] nav {
  direction: rtl;
}

/* Dropdown menus: flip anchor from right to left */
[dir="rtl"] [style*="right: 0"] {
  right: auto !important;
  left: 0 !important;
}

/* Override any hardcoded text-align: left in inline styles for menus */
[dir="rtl"] button,
[dir="rtl"] a {
  text-align: inherit;
}

/* Space-x utilities: Tailwind space-x adds margin-left to siblings.
   In RTL, we need margin-right instead. Tailwind v3 handles this
   with space-x when dir is set, but inline gap works better. */

/* Margin/Padding logical property overrides for common patterns */
[dir="rtl"] .ml-auto { margin-left: 0; margin-right: auto; }
[dir="rtl"] .mr-auto { margin-right: 0; margin-left: auto; }
[dir="rtl"] .ml-1 { margin-left: 0; margin-right: 0.25rem; }
[dir="rtl"] .mr-1 { margin-right: 0; margin-left: 0.25rem; }
[dir="rtl"] .ml-2 { margin-left: 0; margin-right: 0.5rem; }
[dir="rtl"] .mr-2 { margin-right: 0; margin-left: 0.5rem; }
[dir="rtl"] .ml-3 { margin-left: 0; margin-right: 0.75rem; }
[dir="rtl"] .mr-3 { margin-right: 0; margin-left: 0.75rem; }
[dir="rtl"] .ml-4 { margin-left: 0; margin-right: 1rem; }
[dir="rtl"] .mr-4 { margin-right: 0; margin-left: 1rem; }
[dir="rtl"] .ml-6 { margin-left: 0; margin-right: 1.5rem; }
[dir="rtl"] .mr-6 { margin-right: 0; margin-left: 1.5rem; }
[dir="rtl"] .ml-8 { margin-left: 0; margin-right: 2rem; }
[dir="rtl"] .mr-8 { margin-right: 0; margin-left: 2rem; }

[dir="rtl"] .pl-2 { padding-left: 0; padding-right: 0.5rem; }
[dir="rtl"] .pr-2 { padding-right: 0; padding-left: 0.5rem; }
[dir="rtl"] .pl-3 { padding-left: 0; padding-right: 0.75rem; }
[dir="rtl"] .pr-3 { padding-right: 0; padding-left: 0.75rem; }
[dir="rtl"] .pl-4 { padding-left: 0; padding-right: 1rem; }
[dir="rtl"] .pr-4 { padding-right: 0; padding-left: 1rem; }
[dir="rtl"] .pl-6 { padding-left: 0; padding-right: 1.5rem; }
[dir="rtl"] .pr-6 { padding-right: 0; padding-left: 1.5rem; }
[dir="rtl"] .pl-8 { padding-left: 0; padding-right: 2rem; }
[dir="rtl"] .pr-8 { padding-right: 0; padding-left: 2rem; }

/* Text alignment flip */
[dir="rtl"] .text-left { text-align: right; }
[dir="rtl"] .text-right { text-align: left; }

/* Border radius directional flip */
[dir="rtl"] .rounded-l { border-radius: 0 var(--radius-md) var(--radius-md) 0; }
[dir="rtl"] .rounded-r { border-radius: var(--radius-md) 0 0 var(--radius-md); }
[dir="rtl"] .rounded-l-md { border-radius: 0 8px 8px 0; }
[dir="rtl"] .rounded-r-md { border-radius: 8px 0 0 8px; }
[dir="rtl"] .rounded-l-lg { border-radius: 0 12px 12px 0; }
[dir="rtl"] .rounded-r-lg { border-radius: 12px 0 0 12px; }

/* Border directional flip */
[dir="rtl"] .border-l { border-left: none; border-right: 1px solid; }
[dir="rtl"] .border-r { border-right: none; border-left: 1px solid; }

/* Slide animations: reverse direction for RTL */
[dir="rtl"] .animate-slide-in {
  animation-name: slideInRtl;
}

@keyframes slideInRtl {
  from { transform: translateX(-100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

/* Scrollbar position: RTL moves scrollbar to left side (browser default) */

/* Form inputs: ensure proper alignment */
[dir="rtl"] input,
[dir="rtl"] textarea,
[dir="rtl"] select {
  text-align: right;
}

[dir="rtl"] input[type="number"],
[dir="rtl"] input[type="tel"] {
  text-align: left;
  direction: ltr;
}

/* Tables: flip text alignment */
[dir="rtl"] th,
[dir="rtl"] td {
  text-align: right;
}

[dir="rtl"] th:last-child,
[dir="rtl"] td:last-child {
  text-align: left;
}

/* Score/stat numbers should remain LTR */
[dir="rtl"] .stat-value,
[dir="rtl"] .score-value,
[dir="rtl"] [data-numeric] {
  direction: ltr;
  unicode-bidi: isolate;
}

/* Percentage and number displays */
[dir="rtl"] .percentage,
[dir="rtl"] .atlas-score {
  direction: ltr;
  unicode-bidi: isolate;
}

/* Progress bars: flip direction */
[dir="rtl"] .progress-bar {
  direction: rtl;
}

/* Tooltips: flip positioning */
[dir="rtl"] .tooltip {
  left: auto;
  right: 0;
}

/* Kingdom card layout adjustments */
[dir="rtl"] .kingdom-card {
  text-align: right;
}

/* Badge positioning */
[dir="rtl"] .badge {
  direction: ltr;
  unicode-bidi: isolate;
}

/* Safe area insets for RTL */
@supports (padding: max(0px)) {
  [dir="rtl"] .safe-area-inset {
    padding-right: max(0.75rem, env(safe-area-inset-right));
    padding-left: max(0.75rem, env(safe-area-inset-left));
  }
}

/* Mobile RTL adjustments */
@media (max-width: 768px) {
  [dir="rtl"] .container {
    padding-right: 0.75rem;
    padding-left: 0.75rem;
  }

  /* Mobile menu slides from left in RTL */
  [dir="rtl"] .mobile-menu {
    right: auto;
    left: 0;
  }

  /* Swipe gestures direction hint */
  [dir="rtl"] .swipe-hint {
    transform: scaleX(-1);
  }
}
