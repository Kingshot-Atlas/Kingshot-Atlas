# Kingshot Atlas - Backend Environment Variables
# Copy this file to .env and fill in your values

# ===================
# REQUIRED
# ===================

# JWT Secret Key - MUST be set before running
# Generate with: openssl rand -hex 32
SECRET_KEY=your-secret-key-here-generate-with-openssl

# ===================
# SECURITY - Supabase JWT Validation
# ===================

# Supabase JWT Secret - Required for production to validate user tokens
# Get from: Supabase Dashboard -> Settings -> API -> JWT Secret
# IMPORTANT: Without this, user authentication headers are NOT validated!
SUPABASE_JWT_SECRET=your-supabase-jwt-secret

# Supabase URL - Used to verify JWT issuer
SUPABASE_URL=https://your-project.supabase.co

# Supabase Service Role Key - Required for admin operations (updating user profiles)
# Get from: Supabase Dashboard -> Settings -> API -> service_role key
# WARNING: This key bypasses Row Level Security - keep it secret!
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# ===================
# OPTIONAL
# ===================

# Database URL (default: SQLite in current directory)
# For PostgreSQL: postgresql://user:password@localhost:5432/kingshot_atlas
DATABASE_URL=sqlite:///./kingshot_atlas.db

# Environment name (development, staging, production)
ENVIRONMENT=development

# Sentry DSN for error monitoring (leave empty to disable)
SENTRY_DSN=

# CORS Origins (comma-separated, default allows localhost)
# ALLOWED_ORIGINS=http://localhost:3000,https://ks-atlas.com,https://www.ks-atlas.com,https://ks-atlas.pages.dev

# ===================
# AI AGENT (Optional)
# ===================

# Anthropic API Key for Atlas Director agent
# Get from: https://console.anthropic.com/
ANTHROPIC_API_KEY=

# ===================
# KINGSHOT PLAYER LINK
# ===================

# Century Games API Salt for player verification
# This is the public salt used by kingshot-giftcode.centurygame.com
KINGSHOT_API_SALT=mN4!pQs6JrYwV9

# ===================
# ADMIN
# ===================

# Admin API key for X-Admin-Key / X-API-Key header auth
# Generate with: openssl rand -hex 32
ADMIN_API_KEY=

# Comma-separated admin email addresses (matched against Supabase JWT)
ADMIN_EMAILS=your-email@example.com

# ===================
# STRIPE PAYMENTS
# ===================

# Stripe Secret Key
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=

# Stripe Webhook Secret (for verifying webhook signatures)
# Get from: https://dashboard.stripe.com/webhooks
STRIPE_WEBHOOK_SECRET=

# Stripe Price IDs (defaults are production IDs â€” override for test mode)
# STRIPE_SUPPORTER_MONTHLY_PRICE=price_xxx
# STRIPE_SUPPORTER_YEARLY_PRICE=

# ===================
# DISCORD INTEGRATION
# ===================

# Discord OAuth2 (for "Link Discord" feature)
# Get from: https://discord.com/developers/applications
DISCORD_CLIENT_ID=
DISCORD_CLIENT_SECRET=

# API Key for authenticating webhook/bot requests (generate a random string)
# Generate with: openssl rand -hex 32
DISCORD_API_KEY=

# Webhook URL for posting patch notes to #patch-notes channel
# Get from: Discord Channel Settings > Integrations > Webhooks > New Webhook
DISCORD_PATCH_NOTES_WEBHOOK=

# Webhook URL for gift code notifications
DISCORD_GIFT_CODES_WEBHOOK=
# Role ID to ping for gift code alerts
# DISCORD_GIFT_CODES_ROLE_ID=1471516628125749319

# ===================
# DISCORD ROLE SYNC (Subscription Tier Roles)
# ===================
# When users subscribe/unsubscribe, their Discord role is automatically synced.
#
# Prerequisites:
# 1. Enable "Server Members Intent" in Discord Developer Portal > Bot > Privileged Gateway Intents
# 2. Bot must have "Manage Roles" permission in the guild
# 3. Bot's role must be HIGHER in the role hierarchy than the roles it manages
# 4. Create "Atlas Supporter" role in your Discord server
#
# To get role IDs: Enable Developer Mode > Right-click role > Copy Role ID

# Discord Bot Token (same as DISCORD_TOKEN used by the bot)
DISCORD_BOT_TOKEN=

# Discord Guild/Server ID where roles will be managed
DISCORD_GUILD_ID=

# Atlas Supporter role ID (pink color: #FF6B8A)
DISCORD_SUPPORTER_ROLE_ID=

# Settler role ID (given to users who link their Kingshot account)
# DISCORD_SETTLER_ROLE_ID=1466442878585934102

# ===================
# DISCORD API PROXY (Cloudflare Worker)
# ===================
# Routes Discord REST API calls through Cloudflare to avoid Render IP bans (Error 1015)

# Cloudflare Worker URL (e.g., https://atlas-discord-proxy.your-domain.workers.dev)
DISCORD_API_PROXY=

# Shared secret between API and Worker for request authentication
DISCORD_PROXY_KEY=

# ===================
# EMAIL (Resend)
# ===================

# Resend API Key for sending emails (support replies, notifications)
# Get from: https://resend.com/api-keys
RESEND_API_KEY=

# From email address and support email
# FROM_EMAIL=Atlas <noreply@ks-atlas.com>
# SUPPORT_EMAIL=support@ks-atlas.com

# ===================
# FRONTEND URL
# ===================

# Used for Stripe checkout redirects, email links, etc.
FRONTEND_URL=http://localhost:3000

# ===================
# ANALYTICS (Optional)
# ===================

# Plausible Analytics (for admin dashboard stats)
# Get from: https://plausible.io/settings
PLAUSIBLE_API_KEY=
# PLAUSIBLE_SITE_ID=ks-atlas.com
